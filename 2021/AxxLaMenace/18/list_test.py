from main import add, explode, reduce


def test_add():
    assert add(3, 4) == [3,4]
    assert add([1,2], [[3,4],5]) == [[1,2],[[3,4],5]]

def test_explode():
    assert explode([[[[[9,8],1],2],3],4])[0] == [[[[0,9],2],3],4]
    assert explode([7,[6,[5,[4,[3,2]]]]])[0] == [7,[6,[5,[7,0]]]]
    assert explode([[6,[5,[4,[3,2]]]],1])[0] == [[6,[5,[7,0]]],3]
    assert explode([[3,[2,[8,0]]],[9,[5,[4,[3,2]]]]])[0] == [[3,[2,[8,0]]],[9,[5,[7,0]]]]
    assert explode([[[[0, 7], 4], [[7, 8], [0, [6, 7]]]], [1, 1]])[0] == [[[[0,7],4],[[7,8],[6,0]]],[8,1]]

def test_explode_right():
    assert explode([[[[[5,8],1],2],3],4])[0] == [[[[0,9],2],3],4]
    assert explode([[[[1,[5,8]],2],3],4])[0] == [[[[6,0],10],3],4]
    assert explode([[[2,[1,[5,8]]],3],4])[0] == [[[2,[6,0]],11],4]
    assert explode([[[2,[1,[5,8]]]],[3,4]])[0] == [[[2,[6,0]]],[11,4]]

def test_explode_left():
    assert explode([1,[2,[3,[4,[5,8]]]]])[0] == [1,[2,[3,[9,0]]]]
    assert explode([1,[[[2,3],[[5,8], 4]]]])[0] == [1,[[[2,8],[0, 12]]]]
    assert explode([1,[[[2,3],[[5,8],[4,2]]]]])[0] == [1,[[[2,8],[0,[12,2]]]]]


def test_reduce():
    assert reduce([[[[[4,3],4],4],[7,[[8,4],9]]],[1,1]]) == [[[[0,7],4],[[7,8],[6,0]]],[8,1]]